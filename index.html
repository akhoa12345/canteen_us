<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Canteen US</title>
    <link rel="stylesheet" href="./assets/css/base.css">
    <link rel="stylesheet" href="./assets/css/grid.css">
    <link rel="stylesheet" href="./assets/css/main.css">
    <link rel="stylesheet" href="./assets/css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto&display=swap" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" />
</head>

<body>
    <div class="app" style="min-height: 100vh;">
        <header class="header">
            <div class="grid wide">
                <nav class="header__navbar hide-on-mobile-tablet">
                    <ul class="header__navbar-list" style="width:1200px">
                        <!-- Header with Search -->
                        <div class="header-with-search">
                            <label for="mobile-search-checkbox" class="header__mobile-search">
                                <i class="header__mobile-search-icon fas fa-search"></i>
                            </label>

                            <!-- Header Logo -->
                            <div class="header__logo hide-on-tablet">
                                <img src="./assets/img/logo.png" alt="" class="header__logo-img" />
                                <a href="/" class="header__logo-link">
                                </a>
                            </div>
                            <input type="checkbox" hidden id="mobile-search-checkbox" class="header__search-checkbox" />
                            <!-- Header Search -->
                            <div class="header__search ">
                                <div class="header__search-input-wrap">
                                    <input type="text" class="header__search-input"
                                        placeholder="Nhập để tìm kiếm sản phẩm" />


                                </div>

                                <button class="header__search-btn">
                                    <i class="header__search-btn-icon fas fa-search"></i>
                                </button>
                            </div>

                            <!-- Header Logo -->
                            <div class="header__location hide-on-tablet">
                                <img src="./assets/img/location.png" alt="" class="header__location-img" />
                                <a href="/" class="header__location-link">
                                </a>
                            </div>




                            <!-- User -->
                            <div class="header__user">
                                <img src="./assets/img/user_avatar.png" alt="" class="header__navbar-user-img" />
                                <ul class="header__navbar-user-menu">
                                    <li class="header__navbar-user-item">
                                        <a href="">Tài khoản của tôi</a>
                                    <li class="header__navbar-user-item header__navbar-user-item--separate">
                                        <a href="">Đăng xuất</a>
                            </div>



                        </div>
            </div>

        </header>
        <div class="app__container" style="background-color: white;">
            <div class="grid wide">
                <div class="row sm-gutter app__content">
                    <!-- Category -->
                    <div class="col l-2 m-0 c-0" style="margin-top: 50px;">
                        <nav class="category">

                            <ul class="category-list">
                                <li class="category-item category-item--active">
                                    <button  class="category-item__link" ><a style="text-decoration: none;" href="./index.html">Trang
										chủ </a></button>
                                </li>
                                <li class="category-item">
                                    <button class="category-item__link" class="category-item__link">Thực đơn

                                    </button>
                                    <!-- <a href="#" class="category-item__link">Thực đơn</a> -->
                                </li>
                                <li class="category-item">
                                    <button class="category-item__link">Kho hàng</button>
                                    <!-- <a href="#" class="category-item__link">Kho hàng</a> -->
                                </li>
                                <li class="category-item">
                                    <button class="category-item__link">Khách hàng</button>
                                    <!-- <a href="#" class="category-item__link">Khách hàng</a> -->
                                </li>
                                <li class="category-item">
                                    <button class="category-item__link">Thống kê</button>
                                    <!-- <a href="#" class="category-item__link">Thống kê</a> -->
                                </li>
                                <li class="category-item">
                                    <button class="category-item__link">Nhân viên</button>
                                    <!-- <a href="#" class="category-item__link">Nhân viên</a> -->
                                </li>
                                <li class="category-item">
                                    <button class="category-item__link">Tạo thẻ khách hàng</button>
                                    <!-- <a href="#" class="category-item__link">Tạo thẻ khách hàng</a> -->
                                </li>
                                </li>
                            </ul>

                        </nav>
                    </div>
                    
                    <div class="right">
                        <div class="type-food">
                            <button style="visibility: hidden;" class="type-food-eat active" id="food">Đồ ăn</button>
                            <button id="cart" >
                                <i class="fa fa-shopping-basket" aria-hidden="true"></i>
                                Giỏ Hàng
                            </button>
                            <button class="type-food-drink" id="drink" style="visibility: hidden;"><a href="./drink.html"
                                    style="text-decoration: none; color: #39B1E4;">Nước, bánh</a> </button>
                        </div>
                        
                        <div class="list">
                            <div class="food">
                                <div class="image"><img class="img-prd"
                                        src="https://images.unsplash.com/photo-1664574654589-8f6c9b94c02d?ixlib=rb-4.0.3&ixid=MnwxMjA3fDF8MHxlZGl0b3JpYWwtZmVlZHwxfHx8ZW58MHx8fHw%3D&auto=format&fit=crop&w=500&q=60"
                                        alt="mi"></div>
                                <div class="name content-product-h3">Hu tieu Nam Vang Quang Chua LAn BEn </div>
                                <div class="id">125</div>
                                <span class="price">300000 <div class="coin">VND</div> </span>
                                <button type="button" class="add  btn-cart">Thêm</button>
                            </div>
                            <div class="food">
                                <div class="image"><img class="img-prd"
                                        src="https://images.unsplash.com/photo-1664574654589-8f6c9b94c02d?ixlib=rb-4.0.3&ixid=MnwxMjA3fDF8MHxlZGl0b3JpYWwtZmVlZHwxfHx8ZW58MHx8fHw%3D&auto=format&fit=crop&w=500&q=60"
                                        alt="mi"></div>
                                <div class="name content-product-h3">Bun</div>
                                <div class="id">126</div>
                                <span class="price">30000 <div class="coin">VND</div> </span>
                                <button type="button" class="add  btn-cart">Thêm</button>
                            </div>
                            <div class="food">
                                <div class="image"><img class="img-prd"
                                        src="https://images.unsplash.com/photo-1664574654589-8f6c9b94c02d?ixlib=rb-4.0.3&ixid=MnwxMjA3fDF8MHxlZGl0b3JpYWwtZmVlZHwxfHx8ZW58MHx8fHw%3D&auto=format&fit=crop&w=500&q=60"
                                        alt="mi"></div>
                                <div class="name content-product-h3">Mi tom</div>
                                <div class="id">125</div>
                                <span class="price">300000 <div class="coin">VND</div> </span>
                                <button type="button" class="add  btn-cart">Thêm</button>
                            </div>
                            <div class="food">
                                <div class="image"><img class="img-prd"
                                        src="https://images.unsplash.com/photo-1664574654589-8f6c9b94c02d?ixlib=rb-4.0.3&ixid=MnwxMjA3fDF8MHxlZGl0b3JpYWwtZmVlZHwxfHx8ZW58MHx8fHw%3D&auto=format&fit=crop&w=500&q=60"
                                        alt="mi"></div>
                                <div class="name content-product-h3">Hu tieu</div>
                                <div class="id">125</div>
                                <span class="price">300000 <div class="coin">VND</div> </span>
                                <button type="button" class="add  btn-cart">Thêm</button>
                            </div>
                            <div class="food">
                                <div class="image"><img class="img-prd"
                                        src="https://images.unsplash.com/photo-1664574654589-8f6c9b94c02d?ixlib=rb-4.0.3&ixid=MnwxMjA3fDF8MHxlZGl0b3JpYWwtZmVlZHwxfHx8ZW58MHx8fHw%3D&auto=format&fit=crop&w=500&q=60"
                                        alt="mi"></div>
                                <div class="name content-product-h3">Luong kho</div>
                                <div class="id">125</div>
                                <span class="price">300000 <div class="coin">VND</div> </span>
                                <button type="button" class="add  btn-cart">Thêm</button>
                            </div>
                            <div class="food">
                                <div class="image"><img class="img-prd"
                                        src="https://images.unsplash.com/photo-1664574654589-8f6c9b94c02d?ixlib=rb-4.0.3&ixid=MnwxMjA3fDF8MHxlZGl0b3JpYWwtZmVlZHwxfHx8ZW58MHx8fHw%3D&auto=format&fit=crop&w=500&q=60"
                                        alt="mi"></div>
                                <div class="name content-product-h3">Mì quảng</div>
                                <div class="id">125</div>
                                <span class="price">300000 <div class="coin">VND</div> </span>
                                <button type="button" class="add  btn-cart">Thêm</button>
                            </div>
                            <div class="food">
                                <div class="image"><img class="img-prd"
                                        src="https://images.unsplash.com/photo-1664574654589-8f6c9b94c02d?ixlib=rb-4.0.3&ixid=MnwxMjA3fDF8MHxlZGl0b3JpYWwtZmVlZHwxfHx8ZW58MHx8fHw%3D&auto=format&fit=crop&w=500&q=60"
                                        alt="mi"></div>
                                <div class="name content-product-h3">Mì quảngz</div>
                                <div class="id">125</div>
                                <span class="price">300000 <div class="coin">VND</div> </span>
                                <button type="button" class="add  btn-cart">Thêm</button>
                            </div>
                        </div>

                    </div>

                </div>
            </div>
            
            <div id="myModal" class="modal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Giỏ Hàng</h5>
                        <span class="close">&times;</span>
                    </div>
                    <div class="modal-body">
                        <div class="cart-row">
                            <span class="cart-item cart-header cart-column">Sản Phẩm</span>
                            <span class="cart-price cart-header cart-column">Giá</span>
                            <span class="cart-quantity cart-header cart-column">Số Lượng</span>
                        </div>
                        <div class="cart-items">

                            <!-- <div class="cart-row">
                                <div class="cart-item cart-column">
                                    <img class="cart-item-image"
                                        src="https://bizweb.dktcdn.net/thumb/large/100/228/168/products/sp1-a45a32a1-38d4-4a8a-9c37-e936013858b2.jpg?v=1575877003000"
                                        width="100" height="100">
                                    <span class="cart-item-title">Máy Bơm Chìm Hộ Gia Đình QDX 1500W 220VAC 40L/1min
                                        H=8m</span>
                                </div>
                                <span class="cart-price cart-column">1599000đ</span>
                                <div class="cart-quantity cart-column">
                                    <input class="cart-quantity-input" type="number" value="2">
                                    <button class="btn btn-danger" type="button">Xóa</button>
                                </div>
                            </div> -->
                            <div class="cart-total">
                                <strong class="cart-total-title">Tổng Cộng:</strong>
                                <span class="cart-total-price">0VNĐ</span>
                                

                            </div>
                            <div class="cart-payment">
                                <button ><a href="./payment.html">Thanh toán</a> </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>


        </div>

    </div>
</body>
<script src="./assets/js/index.js"></script>
<script>

    // xóa cart
    const remove_cart = document.getElementsByClassName('btn-danger');


    for (var i = 0; i < remove_cart.length; i++) {
        var button = remove_cart[i]
        button.addEventListener("click", function () {
            var button_remove = event.target
            button_remove.parentElement.parentElement.remove()
        })
    }

    // Thêm vào giỏ
    var add_cart = document.getElementsByClassName("btn-cart");
    for (let i = 0; i < add_cart.length; i++) {
        var add = add_cart[i];
        add.addEventListener("click", function (event) {

            var button = event.target;
            var product = button.parentElement.parentElement;
            var img = product.parentElement.getElementsByClassName("img-prd")[i].src
            console.log(img)
            var title = product.getElementsByClassName("content-product-h3")[i].innerText

            var price = product.getElementsByClassName("price")[i].innerText
            
            addItemToCart(title, price, img)
            // Khi thêm sản phẩm vào giỏ hàng thì sẽ hiển thị modal
            
            // modal.style.display = "block";

            updatecart()
        })
    }

    function addItemToCart(title, price, img) {
        var cartRow = document.createElement('div')
        cartRow.classList.add('cart-row')
        var cartItems = document.getElementsByClassName('cart-items')[0]
        var cart_title = cartItems.getElementsByClassName('cart-item-title')
        // Nếu title của sản phẩm bằng với title mà bạn thêm vao giỏ hàng thì sẽ thông cho user.
        for (var i = 0; i < cart_title.length; i++) {
            if (cart_title[i].innerText == title) {
                alert('Sản Phẩm Đã Có Trong Giỏ Hàng')
                return
            }
        }

        var cartRowContents = `
            <div class="cart-item cart-column">
                <img class="cart-item-image" src="${img}" width="100" height="100">
                <span class="cart-item-title">${title}</span>
            </div>
            <span class="cart-price cart-column">${price}</span>
            <div class="cart-quantity cart-column">
                <input class="cart-quantity-input" type="number" value="1">
                <button class="btn btn-danger" type="button">Xóa</button>
            </div>`
        cartRow.innerHTML = cartRowContents
        cartItems.append(cartRow)
        cartRow.getElementsByClassName('btn-danger')[0].addEventListener('click', function () {
            var button_remove = event.target
            button_remove.parentElement.parentElement.remove()
            updatecart()
        })
        cartRow.getElementsByClassName('cart-quantity-input')[0].addEventListener('change', function (event) {
            var input = event.target
            if (isNaN(input.value) || input.value <= 0) {
                input.value = 1;
            }
            updatecart()
        })
    }
</script>

</html>